
<!--This file is autogenerated. Do not edit!-->
In this demo you will 

* Install Java 11
* Start locally HAM server
* Connect to it through proxy

Download the ham tar.gz from [github releases](https://github.com/kendarorg/HttpAnsweringMachine/releases)
and extract it


<b>Ensure your application is calling -ONLY- http pages or it will not record the 
interactions content</b>


## Configure proxy<a id="proxy_01"></a>

Should set the proxy to 127.0.0.1 And port 1080 for socks5 or 1081 for http/https

<details>
  <summary>Click me for more explanations</summary>

* Chrome:
    * Install [Proxy Switch Omega](https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif)
    * Go to options
    * Add http and https proxy server with
        * Address: 127.0.0.1
        * Port 1081.
      
          <img alt="Ham Proxyes" src="../images/chrome_proxy.gif" width="500"/>
    * Select "proxy" from the extension menu and back to "direct" when you want to disconnect
    * 
      <img alt="Ham Proxyes" src="../images/chrome_proxy_switch.gif" width="100"/>
     
* Firefox
    * Navigate to [about:preferences](about:preferences)
    * Search for "proxy"
    * Click on "Settings"
    * Go to "Manual proxy Configuration"
    * Select the socks5 proxy
        * Address: 127.0.0.1
        * Port 1080
    * Check the "Proxy DNS when using SOCKS v5" flag
    * Clean the settings when needed
  
      <img alt="Ham Proxyes" src="../images/firefox_proxy.gif" width="500"/>
    
</details>


## Configure the application proxy<a id="appproxy_01"></a>

Here is configured for both http and https BUT only http traffic will be intercepted

### On the application

* [On Baeldung for java](https://www.baeldung.com/java-connect-via-proxy-server)

Just add to the java command to start the application the following:

<pre>
    -Dhttp.proxyHost=127.0.0.1  -Dhttp.proxyPort=1081
    -Dhttps.proxyHost=127.0.0.1 -Dhttps.proxyPort=1081
</pre>

* [Some C# suggestions](https://dotnetcoretutorials.com/2021/07/11/socks-proxy-support-in-net/?series)

### On HAM configuration

First ensure that all the ports called by your application are set on the 
file httpproxy.external.json in the "http" section. In the example here the 
http listen on 80, 8081 and 8082

<pre>
  {
    "id": "http",
    "system": true,
    "active": true,
    "port": "80;8081;8082",
    "backlog": 50,
    "useCachedExecutor": true
  },
</pre>



## Run!!

Start the HAM application with the "httpproxy.run.bat/sh" 
Start your appplication
## Record some interaction<a id="createrecording_01"></a>

You can now check ham application going on http://localhost

* You can create a recording on the [recording page](http://www.local.test/plugins/recording)

<img alt="Create recording" src="../images/create_recording.gif" width="500"/>

* Once you create the recording you can start recording!

<img alt="Start recording" src="../images/start_recording.gif" width="500"/>

* Do some interaction on your application
* And stop the recording!
* Now you will se all the calls on the just created recording!

<img alt="Start recording" src="../images/calendar_recorded.gif" width="500"/>

* "Download" the recording as "Sample.json"
