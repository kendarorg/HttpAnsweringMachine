<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="/libs/bootstrap.min.css" rel="stylesheet"/>
    <script src="/libs/vue.js"></script>
    <script src="/libs/httpVueLoader.js"></script>
    <script src="/libs/axios.min.js"></script>
    <script src="/libs/utils.js"></script>
    <link href="/libs/icons/bootstrap-icons.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="/vcss/style.css" />
</head>
<body>
<p>(You can double click on an item to turn it into a folder.)</p>

<!-- the demo root element -->
<ul id="app">
    <simple-tree
            class="item"
            :item="treeData"
            @make-folder="makeFolder"
            @add-item="addItem"
    ></simple-tree>
</ul>
<script type="text/javascript">
    var treeData = {
        name: "My Tree",
        children: [
            { name: "hello" },
            { name: "wat" },
            {
                name: "child folder",
                children: [
                    {
                        name: "child folder",
                        children: [{ name: "hello" }, { name: "wat" }]
                    },
                    { name: "hello" },
                    { name: "wat" },
                    {
                        name: "child folder",
                        children: [{ name: "hello" }, { name: "wat" }]
                    }
                ]
            }
        ]
    };
    var stringData = '{' +
        '  "command": {' +
        '    "name": "isValid",' +
        '    ":name:": "java.lang.String",' +
        '    "paramtype": [{' +
        '      "_": "int",' +
        '      ":_:": "java.lang.Class"' +
        '    }],' +
        '    ":paramtype:": "[Ljava.lang.Class;",' +
        '    "[paramtype]": "1",' +
        '    "parameters": [{' +
        '      "_": 20,' +
        '      ":_:": "java.lang.Integer"' +
        '    }],' +
        '    ":parameters:": "[Ljava.lang.Object;",' +
        '    "[parameters]": "1"' +
        '  },' +
        '  ":command:": "org.kendar.janus.cmd.Exec"' +
        '}';

    // Check if value is primitive value according to MDN docs:


    var nodes = convertToNodes(JSON.parse(stringData));
    treeData = {
        name: "My Tree",
        type: "ROOT",
        value: null,
        children:nodes
    }

    console.log(treeData);


    new Vue({
        el: '#app',
        components: {
            'simple-tree': httpVueLoader('/vcomponents/vtree.vue')
        },
        data: {
            treeData: treeData
        },
        methods: {
            makeFolder: function(item) {
                Vue.set(item, "children", []);
                this.addItem(item);
            },
            addItem: function(item) {
                item.children.push({
                    name: "new stuff"
                });
            }
        }
    });
</script>
</body>
</html>